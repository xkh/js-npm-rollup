!function(e,s){"object"==typeof exports&&"undefined"!=typeof module?s(exports):"function"==typeof define&&define.amd?define(["exports"],s):s((e=e||self)["preload-all"]={})}(this,(function(e){"use strict";e.preloadAll=e=>{const{links:s=[],type:t,ignore:n=!1,retry:l=0}=e;let c=[],o=[],i=0,d=t;if("js"===d){const e=document.getElementsByTagName("script");if(e&&e.length)for(let s=0;s<e.length;s++)c.push(e[s].src)}if("css"===d){const e=document.getElementsByTagName("link");if(e&&e.length)for(let s=0;s<e.length;s++)o.push(e[s].href)}const r=e=>new Promise((s,a)=>{let u=null;["image","js","css"].includes(t)||(/.png|.jpg|.jpeg|.gif|.webp|^data:image\/jpg;base64,/.test(e)?d="image":/.\.js$/.test(e)?d="js":/.\.css$/.test(e)?d="css":a({success:!1,code:949001,msg:"Failed, format is not supported！！！",link:e})),"image"===d&&(u=new Image,u.src=e),"js"===d&&(c.includes(e)&&s({success:!0,msg:"Already loaded",link:e}),u=document.createElement("script"),u.type="text/javascript",u.src=e,document.body.appendChild(u)),"css"===d&&(o.includes(e)&&s({success:!0,msg:"Already loaded",link:e}),u=document.createElement("link"),u.type="text/css",u.rel="stylesheet",u.href=e,document.body.appendChild(u)),u.onload=()=>{s({success:!0,msg:"Successfully",link:e})},u.onerror=()=>{n?s({success:!0,msg:"Loading failed, has been ignored",link:e}):i<l?(i++,r(e).then(()=>{i=0,s({success:!0,msg:"Successfully loaded after Attempts to",link:e})})):a({success:!1,code:949002,msg:"Failed, you can configure 【ignore: true】！！！",link:e})}}),a=s.map(e=>r(e));return Promise.all(a)},Object.defineProperty(e,"__esModule",{value:!0})}));
